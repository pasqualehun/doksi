\chapter{Elõzmények}


\section{Motiváció}
 
Az MTA SZTAKI Rendszer és Irányításelméleti Kutatólaboratóriumában folyó kutatások eredményének demonstrálására szükség volt egy kézzelfogható eszköz megalkotására. A kifejlesztett szabályozó algoritmusok mûködésének bemutatásának az egyik leglátványosabb módja egy repülõgép irányítása. Egy stabil repülési tulajdonságokkal bíró repülõ levegõben tartása sem triviális, szükség van a kormányszervek harmonikus mozgatására, a tolóerõ szabályzására. Ezen túlmenõen ha feladatokkal látjuk el, pl. fordulópontokat követve feltérképezni az alatta lévõ területet, már számolni kell a széllel, mely eltérítheti az útvonaláról, felszálló légáramlatokkal, melyek ellen gyors reagálással kell válaszolnia. Mivel egy teljesen felszerelt repülõ összeállítása, felprogramozása nagy szakértelmet, sok idõt, energiát igényel és nem utolsó sorban anyagi ráfordítást, egy esetleges meghibásodás jelentõs kárt okozna. Ezen okok miatt felmerült az igény a repülõ megbízhatóságának növelésére, így a most folyamatban lévõ ``Nagy megbízhatóságú pilóta nélküli légijármû projekt'' keretében egy olyan avionikai rendszer fejlesztése is folyik, amelyben cél minden egyes repülõgép alrendszer meghibásodásának diagnosztizálása, a diagnosztikai információkat felhasználva a repülõgép átkonfigurálása. 


\section{Repülõgép felépítése}

A jelenlegi repülõ egy saját építésû 3.2 m fesztávolságú modell, melybe diagnosztikai és hibadetekciós célokra egyedi tervezésû komponensek kerültek. A kommerciális célokra szánt szervó motorok nem szolgálnak elég információval a kitérésükrõl, fogyasztásukról, ezért ezek mérésérõl gondoskodni kellett.

\begin{figure}[H]
	\centering
	\resizebox{12cm}{!}{
		\includegraphics{figures/orca.png}}
	\caption{}
	\label{fig:sys}
\end{figure}


\subsection{Architektúra}

Elsõdleges szempont, hogy egy komponens meghibásodása ne okozza a gép vesztét, tehát a rendszerben ne maradjon SPOF \footnote{Single Point Of Failure, olyan meghibásodás, mely ha bekövetkezik, az egész rendszer leállásához vezet}. Ezt redundanciával érhetjük el, mely során a repülõgépen duplikáljuk azokat az elemeket, melyek nélkülözhetetlenek a levegõben maradásához:
\begin{itemize}
\item motor
\item kormányfelületek és ezeket mozgató motorok
\item tápellátás
\item központi számítógép
\end{itemize}

A repülõ méretébõl adódóan térbeli szeparációval nem lehetséges a megbízhatóság növelése, mint pl. harci repülõgépek fedélzeti számítógépeinél, melyek a találat kockázata miatt elszórva, akár 4--5x-ve vannak.

\begin{figure}[H]
	\centering
	\resizebox{13cm}{!}{
		\includegraphics{figures/sys.png}}
	\caption{}
	\label{fig:sys}
\end{figure}

\figref{sys} ábrán látható a kialakított architektúra. Elemei:

\begin{itemize}
\item \textbf{FCC} Flight Controll Computer, repülõgép irányítása
\item \textbf{NAV} GPS, nyomásmérõ, orientációmérõ
\item \textbf{MOD} modem, kommunikáció
\item \textbf{Gateway} CAN-FlexRay átjárást biztosít
\item \textbf{PWR} feszültségválasztó
\item \textbf{M1, M2} motorok
\item \textbf{S1, S2, S3, S4} szervók
\item \textbf{Sx, Mx} szabályzóelektronika

\end{itemize}

A központi számítógépek(ábrán zölddel jelölve 1-es 2-es) 1--1 szendvics panelen helyezkednek el, központi elemük az FCC, mely az irányításért felelõs. A navigációs (NAV) eszköz szolgáltatja a GPS-bõl érkezõ magasság és pozíció adatokat, az IMU\footnote{Inertial Measurement Unit, orientáció- és gyorsulásmérõ berendezés}-ból érkezõ orientációt, a nyomásmérõbõl a légsebesség és magasság értékeket. Ezen egy mikrokontroller elõfeldolgozást végez, így már csak a ténylegesen feldolgozandó információval kell az FCC-nek számolnia. Az FCC és a NAV közötti kommunikáció CAN buszon keresztül zajlik. Az ábrán látható S és M-mel jelölt elemek rendre a szervó motorok és a meghajtásért felelõs motorok, melyek redundáns FlexRay kommunikációs csatornán kapják az utasításokat az FCC-bõl. A CAN--FlexRay és FlexRay--CAN átalakítást a Gateway egység végzi. A szervók és motorok nem szolgálnak elég információval saját állapotukról, így ezek át vannak alakítva, hogy a FlexRay hálózatra illesztésért felelõs szabályozóelektronikájuk (Sx, Mx) megfelelõen mûködhessen. Ezekre bármilyen szabályzóalgoritmus írható, hibadiagnosztikai célokra fault detection filtert vagy Kármán szûrõ alkalmazható. A szervók mágneses enkódere a kitérésrõl, a motorok elektronikája a fogyasztásról ad információt. 
A dolgozat szempontjából a legérdekesebb egység a modem (MOD) mely az FCC-vel soros porton kommunikál.
Hibatûrésbõl adódóan az energiaforrások is redundánsan szerepelnek, a központi számítógépek a B3 és B4-gyel jelölt akkumulátorból nyerhetnek energiát, a választást a PWR néven jelzett egység végzi. Különbözõ stratégiák választhatók az akkumulátor átkapcsolását illetõen, lehetséges mindig a legnagyobb feszültséggel operálót választani vagy egyiket lemeríteni bizonyos százalékig és ezután váltani. A B5 és B6 a motorokat hivatottak kiszolgálni, ezek a legnagyobb fogyasztásúak, így ezek kapacitása a legnagyobb. B1 és B2 biztosítja az aktuátoroknak, az hozzájuk tartozó vezérlõknek az áramforrást.
Továbbá, mivel a repülõgép jelenleg csak távirányítással tud felszállni, így a távvezérlõ egység (RC) és a PWM-CAN átalakításért felelõs PIC is ezt a 2 akkumulátort használja. A PIC közvetlenül az szabályzó elektronikákhoz csatlakozik CAN interface-en, ez a legközvetlenebb módja a kézi irányításnak.

\subsection{Kommunikáció}
A fedélzeti MOD egység egy \cite{bib:xbee} XBee-PRO 868 típusú modem, mely alacsony fogyasztása és nagy hatótávolsága miatt ideális egy ilyen környezetbe. Vevõ oldalon ugyanilyen modem található duplikáltan, mely szintén soros porton küldi a földi állomásnak a vett jelet, a modemek között lévõ vezeték nélküli protokoll: 802.15.4, mellyel a \sectref{prot} fejezet foglalkozik.

\subsubsection{Vezeték nélküli modem}

A kiválasztott modem kétféleképpen képes kommunikálni:

\begin{itemize}
\item API csomagküldés
\item AT transzparens
\end{itemize}

\textbf{API} módban egy eszköz több eszköztõl tud csomagokat venni, ha egy csomag megérkezik a küldõtõl a fogadóig, egy ACK\footnote{Acknowledgement, nyugtázó üzenet, melyet a fogadó küld a feladónak egy csomag sikeres vétele esetén} üzenettel válaszol, ha ezt nem kapja meg, a csomagot újraküldi, lehetõség van broadcast üzenetek küldésére is, melyet minden eszköz megkap. Egy csomag többek közt tartalmazza a küldõ és a fogadó címét, az adatot és adatintegritás céljából checksum mezõjében összesítve csomag tartalmát.


\textbf{AT} mód egy vezeték nélküli kapcsolatot jelent 2 sorosport közt. A modem a soros portján bejövõ adatokat rádiójelekké alakítja, melyet a virtuális kapcsolat végpontja fogad és visszaalakítja soros portra. Ez pont-pont kommunikációra hivatott, egyéb topológia nem támogatott.


\begin{figure}[H]
	\centering
	\resizebox{5cm}{!}{
		\includegraphics{figures/xbee.png}}
	\caption{}
	\label{fig:xbee}
\end{figure}

\subsubsection{IEEE 802.15.4 vezeték nélküli protokoll}
\label{sect:prot}
Az IEEE\footnote{Institute of Electrical and Electronics Engineers}-nek egy csoportja a 802.15 mely a WPAN\footnote{Wireless Personal Area Network} hálózatok szabványosításával foglalkozik, 7 alcsoportja közül a 802.15.4 \cite{bib:ieee} a Low Rate WPAN nevet viseli. Ez a szabvány a kis fogyasztású, olcsó és alacsony sávszélességû vezeték nélküli kommunikációval foglalkozik. Az OSI modell elsõ (fizikai) és második (adatkapcsolati) rétegét valósítja meg, erre építkezik a ZigBee \cite{bib:zigbee} cég által specifikált protokoll verem.

A fizikai réteg feladata fizikai összeköttetést teremteni a hardware-rel, specifikálja, mûködési feszültséget, szabályozza a használandó frekvenciát, ami Európában 868-868.6 MHz, Észak-Amerikában 902-928 MHz, világszerte 2.4-2.4835 GHz-es ISM\footnote{Industrial, Scientific and Medical (ISM) sávok, melyek szabadon használhatóak ipari, tudományos és orvosi területen } tartományban helyezkedik el. Továbbá átjárást biztosít a felette lévõ adatkapcsolati rétegnek, melynek feladata a hibamentes átvitel biztosítása 2 pont között hibajavítással/jelzéssel és forgalomszabályzással. A biteket keretekbe ágyazva küldi a felsõbb rétegnek, maximális mérete 127 byte melynek formátuma a IEEE 802.15.4-2011-ben van specifikálva, 16 bites CRC ellenõrzõ kóddal zárul.

\begin{figure}[h]
	\centering
	\resizebox{5cm}{!}{
		\includegraphics{figures/lrwpan.png}}
	\caption{}
	\label{fig:lrwpan}
\end{figure}

2 fajta topológia kialakítása lehetséges, egyik a pont-pont másik a csillag. Mindegyik eszköz egy egyéni 64 bites azonosítóval rendelkezik.

A Zigbee 2 újabb réteget helyez az eddigiek fölé, a hálózati és az alkalmazásit, melybe belekerült a ZDOs\footnote{ZigBee Device Objects}, mely az eszközök csatlakozásáért, felderítéséért és biztonságáért felelõs.

Alacsony fogyasztása abban rejlik, hogy alvó állapotból 30 ms alatt aktívra tud váltani, így gyakran tud alacsony fogyasztású állapotban lenni, jelentõs késleltetés nélkül. Nagy hatótávolságot a 868 MHz-es verziónál a BPSK \cite{bib:network} (Binary Phase-Shift Keying) és Direct Sequence Spread Spectrum (DSSS) technológiák keresztezésével érték el, mely nagy jel-zaj viszonyt biztosít. Az BPSK lényege, a 0-1 és 1-0 átmenetet a vivõfrekvencia 180 fokos fordításával reprezentálja, mely jelentõs zajt képes elviselni, a DSSS egy bitet 4 biten reprezentál, igaz ez csökkenti a sávszélességet, de robosztusabbá teszi az információt. A megbízhatóságot Carrier Sense Multiple Access Collision Avoidance (CSMA/CA) segítségével érték el, mielõtt egy állomás adna, megnézi hogy a csatornán zajlik-e kommunikáció, ha igen akkor különbözõ stratégiák segítségével vár az üzenet küldésének újbóli próbálásával.

Az XBee a Zigbee protokollt megvalósító bejegyzett márkaneve, melynek tulajdonosa a Digi cég.

\section{Saját feladat}

Feladatom közé tartozik a kapcsolat kiépítése a repülõgép és a földi állomás között, melynek során meg kell oldanom a soros porti kommunikáció létrehozását majd a fogadott független adatok feldolgozását és kijelzését.

\subsection{Mi a földi irányító állomás feladata?} 

Egy UAV vezetéséhez elengedhetetlen egy bázis, ahonnan a földi személyzet irányítja, monitorozhatja a repülést. Általában több \cite{bib:aimofuav} funkciót lát el:
\begin{itemize}
\item Küldetés tervezés: útvonal meghatározása, illetve a célpontok kijelölése
\item Küldetés végrehajtás: távirányítással vezetve az operátor végrehajtja a feladatot
\item Adatok megjelenítése: megfelelõ módon kijelezni a repülõgép állapotát, esetleges hibáit
\end{itemize}


\subsection{Hibatûrõ kommunikáció kialakítása}

\subsubsection{Modem kommunikáció}

A modem soros port interface-t biztosít, egy USB-RS232 átalakítóval USB porton keresztül megoldható egy olyan számítógéppel is az összeköttetés, mely nem rendelkezik soros porttal, pl. saját energiaellátással rendelkezõ modern laptop. Figyelembe kell venni, hogy feladataim közé tartozik az útvonalpontok feltöltésének lehtõségét  

\subsubsection{Párhuzamos csatornák}

Mivel a repülõgépen duplikáltak az elemek, így a küldõ oldali modem is, a független jelek vételére megoldást kell találni és az esetleges eltérésekkel számolni kell.

\subsubsection{Biztonságos protokoll}

2 irányú kommunikáció kialakítása a cél, így a küldendõ adatok csomagjának biztonságos protokollját ki kell dolgozni, mely az adatintegritás megõrzése érdekében hibajelzésre alkalmazható.

\subsection{Grafikus felhasználói felület}

Ahhoz hogy a kialakítandó megjelenítés felhasználóbarát legyen, több nézeti oldal szükséges: 
\begin{itemize}
\item Egy áttekintõ képernyõ, mely a legfontosabb adatokat jeleníti meg a repülõvel kapcsolatban (pozíció, sebesség, irány)
\item Egy tervezõ modul, amin a lerepülendõ útvonalhoz tartozó fordulópontok kijelölése lehetséges
\item Egy diagnosztikai nézet, melyen az alacsonyabb prioritású adatok tekinthetõek át
\item A kommunikáció alacsony szintû megjelenítésére egy terminál ablak létrehozása, melyen a kapott nyers adatok látszódnak
\end{itemize}


\section{Földi állomások}

Számos megoldás született földi állomások GUI\footnote{Graphics User Interface, grafikus megjelenítés}-jainak kialakítására. Elsõdleges követelmény, hogy az operátor mindig a legfontosabb információkat láthassa, ehhez szoftverergonómiailag kell megtervezni a mûszerek. \cite{bib:multimodal} Kísérleteket folytattak, milyen elrendezésben, hány képernyõn érdemes megjeleníteni az adatokat, úgy, hogy az még ne terhelje túl az operátort. Bebizonyosodott, hogy érdemes több módon jelzést adni, így pl. nagy prioritású eseménynél a figyelmeztetõ ablak megjelenését hanghatás is kíséri. Alábbiakban összehasonlításra kerülnek a piacon lévõ megjelenítési felületek, megoldások.


\subsection{ArduPilot}

Az \cite{bib:ardu} Ardupilot projekt létrejöttének oka, hogy otthoni körülmények között, nem ipari alkatrészekbõl bárki összeállíthasson egy autonóm jármûvet, mely az elõre betáplált utasításokat végrehajtja. Központi eleme az Arduino cég által készített ATMel mikroprocesszorra épített platform, mely felhasználóbarátabbá teszi a mikroprocesszor programozását. Magas szintû utasításokkal segíti az eszközzel való barátkozást, nincs szükség assembly szintû tudásra. Erre a platformra hozták létre az ArduPilot programot, képes vezérelni többféle autonóm jármûvet:
\begin{itemize}
\item ArduPlane néven futó változat: robotrepülõgép
\item ArduCopter: 1, 3, 4, 6, 8 propelleres helikopter
\item Ardurover: 4 kerekû autó
\end{itemize}
Sikerességének fõ oka, a nyílt forráskód, Arduino panel alacsony ára (~5 ezer Ft) és a projekt mögött álló lelkes közösség.

Ennek a közösségnek köszönhetõen született a Mission Planner nevû szoftver, mely teljes körû támogatást nyújt a csatlakoztatott jármûveknek.


\subsubsection{Fõképernyõ}

Több nézet segítségével könnyen átlátható a funkcionalitása, repülés szempontjából a fõképernyõn a legfontosabb adatok találhatóak. A repülõgép orientációját, sebességét, irányát egy mûhorizonton láthatja a felhasználó, ez vizuálisan szemlélteti, hogy hány fokos bedöntéssel repül, milyen állásszöggel emelkedik. Alatta lévõ területen elõre beállított adatokat jelenít meg, pl. GPS magasság, GPS sebesség, szélirány (valós mágneses irány és a sebesség vektor különbségébõl számítható). A legnagyobb területet a térkép foglalja el, melyen az aktuális irány, lerepült útvonal, fordulópontok láthatóak. Megfigyelhetõ, hogy ez kapja arányaiban a legnagyobb területet.

\begin{figure}[H]
	\centering
	\resizebox{15cm}{!}{
		\includegraphics{figures/ardu.png}}
	\caption{}
	\label{fig:ardu}
\end{figure}

Ez a nézet akkor jöhet jól, mikor olyan meghibásodás történik, melyre nincs felkészítve az irányítóegység és szükséges lehet a kézi üzemmódra váltás. Elõfordulhat ilyen esetben, hogy nincs vizuális rálátás az operátor és a repülõgép között, ekkor csak az itt látható mûszerek és térkép alapján szükséges irányítania. Szerencsére ez az avionikában már bizonyított, hogy mûszerek segítségével, ``vakon'' is lehetséges repülni, itt azonban ez az eset csak pár percig szükséges.

\subsubsection{Tervezõ és útvonalfeltöltõ}

Másik nézet lehetõséget biztosít útvonalpontok kijelölésére, az útvonalpontokhoz egy listából kiválasztható, hogy az adott pont start-, forduló-, végpont és egyéb lehetõségek. Az útvonalpontok pozícióját egérrel módosíthatjuk, törölhetjük. Bal felsõ sarokban a kijelölt tervnek hosszát láthatjuk, ez segítséget nyújt, nehogy túlhaladjuk a rádiókapcsolat és a repülõ hatósugarát. Az elkészített tervet feltölthetjük a csatlakoztatott eszközre.
\begin{figure}[H]
	\centering
	\resizebox{15cm}{!}{
		\includegraphics{figures/ardu_plan.png}} %plan
	\caption{}
	\label{fig:ardu_plan}
\end{figure}

Mindig látható a csatlakozás gomb, melynél a soros port és a jelsebesség beállítása után a csalatkozás gombbal csatlakozik a program a portra.


\subsubsection{Összegzés}

Felhasználói szempontból barátságos felületet biztosít a különbözõ nézetekkel, gombok átgondolt elhelyezésével.
Nem a program hibája, de nincs felkészítve párhuzamos csatornák kezelésére, ez az ArduPilot projekt egyszerûségének köszönhetõ, mivel nem használ redundanciát. Mivel a repülõ, melyhez a programot készítem, nagy megbízhatóságú, így szükséges megoldani a 2 port kezelését és az azokon érkezõ adatok feldolgozását. Jó ötlet a csatlakozás gomb mindig látható elhelyezése, a fõképernyõn térképen ábrázolni a repülõ helyzetét, illetve a mûhorizont. Azonban hibadiagnosztikai kijelzés nincs megoldva, melynek szintén fontos a megvalósítása.

\subsection{Paparazzi}
\cite{bib:paparazzi} Hasonlóan mint az ArduPilot, ez a projekt is a könnyen, otthon összeszerelhetõ repülõ megépítése jegyében született. Nem csak egy nyílt forráskódú robotpilótát ad, hanem komplett ``csináld magad'' készletet, melyben feszültségszabályzótól kezdve a GPS vevõig mindent megkaphatunk. Továbbá a hozzá készült földi állomáshoz antennát, modemet és programot is nyújt.

A program a következõ funkciókkal rendelkezik:

\begin{itemize}
\item több platform támogatása (fix- és forgószárny)
\item több jármû egyidejû kezelése
\item Google Maps, OpenStreetMaps, Microsoft Maps térképes megjelenítés
\item küldetés tervezés
\item mozgatható iránypontok
\item hangjelzés
\end{itemize}


\subsubsection{Fõképernyõ}

\begin{figure}[h]
	\centering
	\resizebox{15cm}{!}{ 
		\includegraphics{figures/paparazzi.png}} %conn
	\caption{}
	\label{fig:paparazzi}
\end{figure}

\figref{paparazzi} ábrán látható képernyõ nagy százalékát a térkép foglalja el, melyen a lerepült útvonal és a fordulópontok láthatóak. A repülõ aktuális helyzete mellett a neve, sebessége és repülési magassága is kijelezve van. Bal oldalt egy információs sávban a következõ fontosabb adatok láthatóak: akkumulátor töltöttsége, sebesség, tolóerõ, magasság, illetve utasítások: fel-, leszállás, megfigyelés indítása. Jobb felsõ sarokban a kurzor térképen lévõ koordinátája kerül megjelenítésre. 


A térképet billentyûzettel és egérrel lehet mozgatni, nagyítani. A fordulópontokat is ezen a felületen lehet szerkeszteni. A módosítások egy megerõsítõ üzenet jóváhagyása után töltõdnek fel a repülõre, melyre az egy megerõsítõ válasszal reagál. Új pontot csak felszállás elõtt lehetséges feltölteni.

Középen alul található egy több füllel ellátott rész, melynél kiválasztható, hogy éppen egy mûhorizontot, a GPS által vett adatokat, az útvonaltervet vagy a beállításokat szeretnénk-e látni.

\subsubsection{Összegzés}
Egy képernyõ szolgál a navigációra és az útvonal-kijelölésre, mely szerintem nem a legjobb megoldás, mivel nincs elválasztva ez a két funkcionalitás. Összességében ez is egy nagyon jól használható program, mely teljesen kiszolgálja az UAV-kat melyhez készítették.

\subsection{MicroPilot Horizon}

\cite{bib:makkay} ``Az 1995 óta mûködõ kanadai \cite{bib:micropilot} MicroPilot a világ egyik legismertebb robotpilóta gyártó cége, 65 országban több mint 750 alkalmazó használja az eszközeiket. Népszerûek az iskolákban, egyetemeken, kutató intézetekben, a gazdaság különbözõ területein, de a védelmi szféra is szép számmal használ robot légi jármûvein MicroPilot berendezéseket. Az adatátviteli csatorna ugyanazokat a funkciókat képes biztosítani, mint a programbevitelnél használt kábeles összeköttetés, így ezen keresztül repülés közben is módosítható az útvonal, a repülési paraméterek és az egyéb beállítások. A MicroPilot fedélzeti egysége ezen kívül egy rádió távirányító (RCON) vevõberendezést is fogad, amely lehetõséget teremt a földi adó konzoljáról az irányítás átvételére és botkormányos kézi vezérlésre. Ezt alapvetõen a fel és leszállás idejére, illetve az útvonal kritikus szakaszain használják. Amennyiben az RC távirányítóval mûködõ repülõgép veszti el a kapcsolatot, akkor a fedélzeti vevõberendezés FAILSAFE üzemmódra kapcsol és annak beállítása szerint mûködteti a repülõgépet. A FAILSAFE vagy az utolsó szervo állást õrzi meg, vagy egy elõre programozott legbiztonságosabb földet érést ígérõ beállításra ugrik.''
A hozzá készített földi irányító egység a MicroPilot Horizon nevet viseli. 
\begin{figure}[h]
	\centering
	\resizebox{15cm}{!}{ 
		\includegraphics{figures/micropilot.png}} 
	\caption{}
	\label{fig:micropilot}
\end{figure}

\subsubsection{Fõképernyõ}

A repülõgépre szerelt kamera képének megjelenítése kulcsfontosságú, mivel a kezelõ ezzel láthatja leginkább a repülõgép helyzetét és a megfigyelt célpontot. Ebben a módban a legfontosabb repüléssel kapcsolatos információk átlátszóan jelennek meg, így nem kell másik képernyõre tekintenie a kezelõnek.
Több eszközhöz tud egyszerre csatlakozni és kiszolgálni, mindegyikhez külön név rendelhetõ. Az összes csatlakoztatott jármû között szinkronizálva vannak az útvonalpontok. Számunkra érdekes lehet, hogy a felmerülõ hibákhoz lehetõség van különbözõ prioritási szintek meghatározására, hangjelzés hozzárendelésére. Így egy bizonyos szint alatti hibák nem terelik el az operátor figyelmét.

\subsubsection{Tervezõ képernyõ}

Repülési terv könnyen, kattintással összeállítható és módosítható, mind repülés elõtt és közben. POI\footnote{Point Of Interest, érdekes hely mely GPS koordinátával megjelölhetõ} gombnyomásra lerakható a térképen, ha esetleg valami olyat lát az operátor, amit érdemes utána ismét megvizsgálni. Az útvonal hosszát folyamatosan kijelzi tervezés üzemmódban.

\subsubsection{Összegzés}

Ez a program elsõsorban távirányításos üzemmód támogatására készült, mely során az operátor irányítja a gépet és ehhez a legtöbb információt szolgáltatja. Így kulcsfontosságú a videókép átvitel támogatása és a legfelhasználóbarátabb megjelenítés.




%http://www.szrfk.hu/rtk/folyoirat/2013_1/2013-1-04-Imre_Makkay.pdf
%http://www.szrfk.hu/rtk/kulonszamok/2012_cikkek/77_Makkay_Imre-Papp_Timea.pdf
%http://www.unmannedgroup.com/index.php?page=2&subpage=6&data=9
%http://www.uavfactory.com/product/16


\subsection{OpenPilot}
\cite{bib:openpilot} A projekt célja, hogy nyílt forráskódú, magas minõségû robot pilótát hozzanak létre autonóm repülõkhöz. 2009-ben alakult, azóta már több mint 200 tagja vesz részt a fejlesztésben a világ 140 országából. A jelenlegi verzió, képes irányítani fix szárnyas repülõt és helikoptert 2-tõl 8 rotorig. 

A hozzá készült GCS több platformon mûködik: Windows, Mac OS, Linux, tervben van az Android támogatás is. Segítségével tölthetõ fel a panelra a fedélzeti program, illetve interface-t biztosít a repülés alatt.

\subsubsection{Fõképernyõ}

Bal oldalon mûhorizont látható, alatta az aktuális jármû orientációja külsõ nézetbõl, jobb oldalon a térkép az aktuális pozíció megjelenítésével.

Ez a nézet szabadon módosítható, különféle ``gadget''-ek kiválasztásával, pl. a külsõ nézet helyett egy mért érték grafikus megjelenítésére kicserélhetõ. Ezek .xml fájlba elmenthetõek és visszatölthetõek, különbözõ konfiguráció igényeihez igazodva.


\begin{figure}[H]
	\centering
	\resizebox{15cm}{!}{ 
		\includegraphics{figures/openpilot.png}} 
	\caption{}
	\label{fig:openpilot}
\end{figure}

Rengeteg beállítási lehetõséget nyújt ez a program, lelkes közösség áll mögötte, minden olyan fontos elvárást kielégít, mely napjainkban felmerülhet egy UAV adatainak megjelenítésével kapcsolatban.

\subsection{QGroundControl}
\cite{bib:qground} MAVLink protokollt használ a kommunikációra, a repülõgép a programon keresztül vezethetõ, ha átkapcsolás szükséges. A MAVLink kifejezetten GCS--UAV összeköttetésére lett kifejlesztve. 

\subsubsection{Fõképernyõ}
Érdekesség, hogy 3D-ben is meg tudja jeleníteni a repülõ aktuális pozícióját. A protokollnak köszönhetõen 255 jármû egyidejû kezelésére alkalmas.
Útvonalpontok menet közben is változtathatóak.


\begin{figure}[H]
	\centering
	\resizebox{15cm}{!}{
		\includegraphics{figures/qground.png}}
		\caption{}
	\label{fig:qground}
\end{figure}

\subsection{HappyKillmore}
\label{sect:happy}
\cite{bib:hk} ArduPilot-hoz készült nyílt forráskódú GCS, a Planner-hez képest ez inkább az egyszerûség híve, kevés mûszer található rajta, de ezekrõl minden információ megtudható. Itt is a térkép nézet dominál, oldalt mozgathatjuk számunkra megfelelõ elrendezésbe a mûszereket. Útvonalpontok feltöltésére szintén van lehetõség.
Támogatja többek között az ArduPilot és a MAVLINK protokollokat.

\begin{figure}[H]
	\centering
	\resizebox{15cm}{!}{
		\includegraphics{figures/hk.png}}
		\caption{}
	\label{fig:hk}
\end{figure}



\subsection{Összehasonlítás}

A felsorolt megoldások összehasonlításából kiderül, hogy egyik sem alkalmaz redundanciát a kommunikáció megvalósítására. Az összesre jellemzõ, hogy a repülõgép pozíciója valamilyen térképen kerül megjelenítésre. Általában a fõképernyõn a sebesség, magasság adatok mindig látszódnak, így az elkészítendõ felületre célszerû egy térképes megjelenítést és a legfontosabb információk kijelzését megoldani. Számos program különválasztotta az útvonal-kijelölés felületét a fõképernyõtõl, így ebbõl merítve készíthetõ egy olyan felület, melyen útvonalpontok hozzáadhatóak, módosíthatóak és feltölthetõk. Mivel redundanciával nem foglalkozik egyik sem, így a dolgozat szempontjából érdekes hibadetektációra nem találunk példát. Láthattuk néhány program több eszköz párhuzamos kiszolgálását támogatta, jelenleg a feladatom egy eszközhöz való csatlakozás megoldása, ám ha szükséges, látható, ezt már sikerült megoldani.
A megoldások forráskódja elég változatos a választott nyelv tekintetében, mondhatni, a nyílt forráskódúak az összes manapság használatos programozási nyelvet felhasználják. A nem nyílt programokról sajnos nem találtam információt. A nyílt forráskódúak tanulmányozásával lehetõség van ötleteket meríteni a tervezéshez és megvalósításhoz.


\begin{table}[H]
	\begin{center}
			\begin{tabular}{| l | l | l | l  | l | l | }
				\hline
				%Program		 			& Forráskód 							&Több          			 &Útvonal  						 & Elõny 					  	\\
				%								&													&eszköz							 &szerkesztése				 &										\\ \hline
			%	Ardupilot				& C\#, nyílt 							& 		-				  		 &				-						 & - 									\\ \hline
			%	Paparazzi 			& ?, nem nyílt						&			+							 &				-					   & 	-									\\ \hline
				%MicroPilot 			& ?, nem nyílt						&			+							 &				+				     & hangjelzéses figyelmeztetés	 	\\ \hline
				%QGroundControl 	& C++, nyílt							&			+							 &				-					   & 	-									\\ \hline
				%HappyKillMore 	& Visual Basic, nyílt			&			-							 &				-					   & 	-									\\ \hline
				
				\hline
				\textbf{Program}    	& \textbf{Ardupilot}			&\textbf{Paparazzi}	 &\textbf{MicroPilot}		& \textbf{QGroundControl} & 	\textbf{HappyKillMore}				  	\\ \hline \hline
				Forráskód							& C\#, nyílt 							& 		?, nem nyílt	 &?, nem nyílt				 & C++, nyílt 		&		VB, nyílt		\\ \hline
				Több eszköz 					&     		        				&			 							 &				 					   & 	-	      			&			\\ \hline
				Útvonal 							& -												&			+							 &				+				     & -	          	&	\\ 
				szerkesztése 					&    											&			 							 &				  			     &  	          	&	\\ \hline
				Elõny 								&             						&			+							 &				-					   & 	-	          	&\\ \hline
				új 										&       		-							 &				-					   & 	-								&							        &\\ \hline
				
				
			\end{tabular}                                                                         
	\end{center}
	\caption{Összefoglalás}
	\label{tab:up}
\end{table}
